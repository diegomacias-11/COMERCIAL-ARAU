{% extends "lista.html" %}

{% block title %}Leads{% endblock %}

{% block extra_head %}
  <style>
    .table-container { overflow-x: auto !important; }
    .table { min-width: 520px; }
  </style>
{% endblock %}

{% block filtros %}
  <form method="get" class="filter-form-simple">
    <div class="filter-block">
      <label for="q">Buscar</label>
      <input
        type="text"
        id="q"
        name="q"
        placeholder="Buscar por nombre"
        value="{{ q }}"
      />
    </div>
    <div class="filter-actions">
      <button type="submit" class="btn-filter">Filtrar</button>
      <a href="{% url 'leads_metalead_list' %}" class="btn-filter">Limpiar</a>
    </div>
  </form>
{% endblock %}

{% block tabla_head %}
  <tr>
    <th>Detalle</th>
    <th>Fuente</th>
    <th>Fecha lead</th>
    <th>Nombre</th>
    <th>Contactado</th>
  </tr>
{% endblock %}

{% block tabla_body %}
  {% for lead in leads %}
    <tr>
      <td>
        <a href="{% url lead.detail_url_name lead.id %}?next={{ request.get_full_path|urlencode }}" class="btn-detalle">Detalle</a>
      </td>
      <td>{{ lead.source_label|default_if_none:"" }}</td>
      <td>{{ lead.created_time|date:"d/m/Y H:i"|default_if_none:"" }}</td>
      <td>{{ lead.full_name|default_if_none:"" }}</td>
      <td>{{ lead.contactado|yesno:"Si,No" }}</td>
    </tr>
  {% empty %}
    <tr>
      <td colspan="100%">Sin leads registrados</td>
    </tr>
  {% endfor %}
{% endblock %}
