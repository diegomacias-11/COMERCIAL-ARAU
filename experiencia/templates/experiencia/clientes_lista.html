{% extends "lista.html" %}

{% block title %}Clientes (Experiencia){% endblock %}

{% block filtros_left %}{% endblock %}

{% block filtros %}
  <form method="get" class="filter-form-simple">
    <div class="filter-block">
      <label for="fecha_desde">Fecha desde</label>
      <input type="date" id="fecha_desde" name="fecha_desde" value="{{ fecha_desde }}" />
    </div>
    <span class="filter-separator"></span>
    <div class="filter-block">
      <label for="fecha_hasta">Fecha hasta</label>
      <input type="date" id="fecha_hasta" name="fecha_hasta" value="{{ fecha_hasta }}" />
    </div>
    <span class="filter-separator"></span>
    <div class="filter-block">
      <label for="cliente">Cliente</label>
      <input type="text" id="cliente" name="cliente" value="{{ cliente_nombre }}" placeholder="Buscar cliente" />
    </div>
    <div class="filter-actions">
      <button type="submit" class="btn-filter">Filtrar</button>
      <a href="{% url 'clientes_experiencia_lista' %}" class="btn-filter">Limpiar</a>
    </div>
  </form>
{% endblock %}

{% block filtros_right %}{% endblock %}

{% block tabla_head %}
  <tr>
    <th>Cliente</th>
    <th>Servicio</th>
    <th>Giro</th>
    <th>Contacto</th>
    <th>Teléfono</th>
    <th>Correo</th>
    <th>Activo</th>
    <th>Nombre comercial</th>
    <th>Domicilio</th>
    <th>Puesto</th>
    <th>Fecha contrato</th>
    <th>Periodicidad</th>
    <th>Chat welcome</th>
    <th>Meet</th>
    <th>Comentarios</th>
    <th>Acciones</th>
  </tr>
{% endblock %}

{% block tabla_body %}
  {% for c in clientes %}
    <tr>
      <td>{{ c.cliente }}</td>
      <td>{{ c.servicio|default_if_none:"" }}</td>
      <td>{{ c.giro|default_if_none:"" }}</td>
      <td>{{ c.contacto|default_if_none:"" }}</td>
      <td>{{ c.telefono|default_if_none:"" }}</td>
      <td>{{ c.correo|default_if_none:"" }}</td>
      <td>{% if c.activo %}Sí{% else %}No{% endif %}</td>
      <td>{{ c.nombre_comercial|default_if_none:"" }}</td>
      <td>{{ c.domicilio|default_if_none:"" }}</td>
      <td>{{ c.puesto|default_if_none:"" }}</td>
      <td>{{ c.fecha_contrato|date:"d/m/Y"|default_if_none:"" }}</td>
      <td>{{ c.get_periodicidad_display|default_if_none:"" }}</td>
      <td>{{ c.get_chat_welcome_display|default_if_none:"" }}</td>
      <td>{% if c.meet %}Sí{% else %}No{% endif %}</td>
      <td>{{ c.comentarios|default_if_none:"" }}</td>
      <td><a class="btn-detalle" href="{% url 'editar_cliente_experiencia' c.id %}?next={{ request.get_full_path|urlencode }}">Detalle</a></td>
    </tr>
  {% empty %}
    <tr><td colspan="100%">Sin clientes de experiencia.</td></tr>
  {% endfor %}
{% endblock %}
